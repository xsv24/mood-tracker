(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){e.exports=n(27)},19:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),l=(n(19),n(3)),i=n(1),s=n(2),u={api:"http://localhost:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT||8080,"/api")},d=function(e,t,n){if(!e)return Promise.resolve();var a=localStorage.getItem("token")||"";return fetch(e,{headers:{"Content-Type":"application/json",Authorization:a||""},method:t,body:JSON.stringify(n),redirect:"follow"}).then((function(e){return 401===e.status&&Object(s.c)("/signin"),e.status<=400?e.json():{error:e.statusText,status:e.status}})).then((function(e){if(e.error)throw e.error;return e})).catch((function(e){throw console.error(e),e}))},m=function(e){var t=e.style,n=e.className,a=e.justify,c=void 0===a?"space-between":a,o=e.align,i=void 0===o?"center":o,s=e.children,u=e.flex;return r.a.createElement("div",{className:n,style:Object(l.a)({},t,{display:"flex",flexDirection:"row",justifyContent:c,alignItems:i,flex:u})},s)},f=function(e){var t=e.style,n=e.className,a=e.justify,c=void 0===a?"space-between":a,o=e.align,i=void 0===o?"center":o,s=e.flex,u=e.children;return r.a.createElement("div",{className:n,style:Object(l.a)({},t,{display:"flex",flexDirection:"column",justifyContent:c,alignItems:i,flex:s})},u)},E=function(e){var t=e.defaultValue,n=e.onChange,a=e.className,c=e.placeholder,o=e.type,l=void 0===o?"text":o,i=e.name,s=e.label,u=e.value;return r.a.createElement("input",{type:l,name:i,className:a,defaultValue:t,placeholder:c||s,onChange:function(e){return n(e.target.value,e)},value:u})},v=n(8),p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.reduce((function(e,t){return t&&(e+="".concat(t," ")),e}),"");return a.substr(0,a.length-1)},g=function(e){var t=e.type,n=void 0===t?"button":t,a=e.color,c=void 0===a?"primary":a,o=e.className,l=e.style,i=e.onClick,s=e.children,u=Object(v.a)(e,["type","color","className","style","onClick","children"]);return r.a.createElement("button",Object.assign({type:n,style:l,className:p(o,c),onClick:i},u),s)},h=function(e){var t=e.img,n=e.alt,a=e.children,c=Object(v.a)(e,["img","alt","children"]);return r.a.createElement(g,c,r.a.createElement(m,{justify:"flex-start"},r.a.createElement("img",{width:"24",height:"24",src:t,alt:n}),r.a.createElement("span",{style:{paddingLeft:5,paddingRight:5}},a)))},y=g,b=function(e){Object(a.useEffect)(e,[])},O=function(e){var t=e.url,n=void 0===t?"":t,r=e.body,c=e.method,o=void 0===c?"GET":c,l=e.defaultValue,s=void 0===l?{}:l,u=e.onMount,m=void 0!==u&&u,f=Object(a.useState)(s),E=Object(i.a)(f,2),v=E[0],p=E[1],g=Object(a.useState)(!1),h=Object(i.a)(g,2),y=h[0],O=h[1];return b((function(){var e=!1;return!m||y||e||(O(!0),d(n,o,r).then((function(t){!e&&p(t)})).catch((function(t){s.error=t,!e&&p(s)})).finally((function(){!e&&O(!1)}))),function(){e=!0}})),[v,y,function(e,t){return y?Promise.resolve():(O(!0),d(e||n,o,t).then((function(e){return p(e),e})).catch((function(e){return s.error=e,p(s),e})).finally((function(){return O(!1)})))}]},j=function(e){var t=e.className,n=e.color,a=e.style,c=e.children;return r.a.createElement("label",{className:p(t,n),style:a},c)},x=function(e){var t=e.loading,n=e.children,c=e.delay,o=void 0===c?500:c,l=Object(a.useState)(t),s=Object(i.a)(l,2),u=s[0],d=s[1];return Object(a.useEffect)((function(){if(t&&d(!1),!t){var e=setTimeout((function(){d(!0)}),o);return function(){return clearTimeout(e)}}}),[o,t,d]),u?r.a.createElement(r.a.Fragment,null,n):r.a.createElement("div",{className:p("fill","center","loader")})},S=r.a.createContext({user:"",email:"",token:"",setUser:function(e){}}),C=function(){var e=Object(a.useContext)(S).setUser,t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),d=Object(i.a)(l,2),v=d[0],p=d[1],g=Object(s.d)(),h=O({method:"POST",body:{email:c,password:v}}),b=Object(i.a)(h,3),C=b[0],k=b[1],w=b[2];return r.a.createElement(m,{flex:1,justify:"center"},r.a.createElement(f,{flex:.4,justify:"flex-start",align:"flex-start",style:{minWidth:120,padding:10}},r.a.createElement("h2",null," LOGIN "),r.a.createElement(E,{name:"email",label:"Email",type:"email",value:c,onChange:o}),r.a.createElement(E,{name:"password",label:"Password",type:"password",value:v,onChange:p}),r.a.createElement(j,{color:C.error&&"danger"},C.error),r.a.createElement(m,{style:{width:"100%",paddingTop:"1rem"}},r.a.createElement(y,{style:{flex:1},onClick:function(){w("".concat(u.api,"/signin"),{email:c,password:v}).then((function(t){e(t),g("/")}))}}," Login "),r.a.createElement(y,{style:{flex:1},color:"secondary",onClick:function(){w("".concat(u.api,"/signup"),{email:c,password:v}).then((function(t){e(t),g("/")}))}}," Register "))),r.a.createElement(x,{loading:k}))},k=r.a.createContext({moods:[],emotions:[]}),w=n(6),N=n(9);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{options:[],selected:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT":var n=Object(N.a)(e.options),a=Object(l.a)({},e.selected,Object(w.a)({},t.payload,n[t.payload]));return n.splice(t.payload,1,Object(l.a)({},n[t.payload],{selected:!0})),{selected:a,options:n};case"UN_SELECT":var r=Object(N.a)(e.options),c=Object(l.a)({},e.selected);return delete c[t.payload],r.splice(t.payload,1,Object(l.a)({},r[t.payload],{selected:!1})),{selected:c,options:r};default:return e}}var _=function(e){return{type:"SELECT",payload:e}},M=function(e){return{type:"UN_SELECT",payload:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useReducer)(T,{options:e,selected:t}),r=Object(i.a)(n,2),c=r[0],o=c.options,l=c.selected,s=r[1];function u(e){s(_(e))}function d(e){s(M(e))}function m(e){s(e in l?M(e):_(e))}return[o,{toggle:m,select:u,unSelect:d,selected:Object.values(l)}]},P=function(e){var t=e._id,n=e.name,a=e.selected,c=void 0===a||a,o=e.select;return r.a.createElement("div",{className:p("mood",c&&"selected"),onClick:function(e){return o&&o(t)}},r.a.createElement("img",{src:"/images/mood/".concat(t,".svg"),alt:n}))},U=function(e){var t=e.moods,n=void 0===t?[]:t,a=e.setMood,c=e.selected;return r.a.createElement(m,null,n.map((function(e){return r.a.createElement(P,Object.assign({key:e._id,select:a,selected:e._id===c},e))})))},L=function(e){var t=e.children,n=e.selected,a=void 0!==n&&n,c=e.onClick,o=void 0===c?function(){}:c;return r.a.createElement("button",{type:"button",className:p("chip",a&&"selected"),onClick:o},r.a.createElement("img",{src:"/images/tick.svg",alt:"ticked"}),t)},W=function(e){var t=e.emotions,n=e.toggle;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(L,{key:e._id,onClick:function(){return n(t)},selected:e.selected},e.name)})))},A=function(e){var t=e.children,n=e.main,a=void 0!==n&&n,c=e.className,o=void 0===c?"":c;return r.a.createElement("div",{className:p("container",a&&"main",o)},t)},I=function(){var e=Object(s.d)(),t=Object(a.useContext)(k),n=t.moods,c=t.emotions,o=Object(a.useState)(4),l=Object(i.a)(o,2),m=l[0],f=l[1],E=Object(a.useState)(!1),v=Object(i.a)(E,2),p=v[0],g=v[1],h=Object(a.useState)(""),b=Object(i.a)(h,2),O=b[0],j=b[1],S=D(c),C=Object(i.a)(S,2),w=C[0],N=C[1],T=N.toggle,_=N.selected;return r.a.createElement(A,{main:!0},r.a.createElement(x,{loading:p}),r.a.createElement("h2",null,"Mood"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),g(!0),d("".concat(u.api,"/entry"),"POST",{mood:m,emotions:_.map((function(e){return e._id})),comments:O.trim()}).then((function(t){console.log(t),e("/")})).catch((function(){return alert("An error processing a request")})).finally((function(){return g(!1)}))}},r.a.createElement(A,null,r.a.createElement(U,{moods:n,setMood:f,selected:m})),r.a.createElement(A,null,r.a.createElement(W,{emotions:w,toggle:T})),r.a.createElement(A,null,r.a.createElement("textarea",{placeholder:"Enter optional comment here...",value:O,onChange:function(e){return j(e.target.value)},rows:8})),r.a.createElement(y,{type:"submit",disabled:!_.length},"Save")))},F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R=["Jan","Feb","Mar","Apr","May","Jun","Aug","Sep","Oct","Nov","Dec"],V=function(e){var t=e.children;return r.a.createElement("div",{className:"calendar-bg"},r.a.createElement("div",null," ",t," "))},J=function(e){var t=e.date,n=e.flex;return r.a.createElement(m,{flex:n,justify:"flex-start"},r.a.createElement(m,{justify:"flex-start"},r.a.createElement(V,null,t.getUTCDate()),r.a.createElement("div",{style:{paddingLeft:"1rem",fontSize:"1.2rem"}},F[t.getUTCDay()]+" "+R[t.getMonth()])),r.a.createElement("div",{style:{paddingLeft:"1rem",fontSize:"1.2rem"}},t.getUTCHours(),":",t.getUTCMinutes()))},z=function(e){var t=e.mood,n=e.comments,a=e.createdAt,c=e.emotions,o=new Date(a);return r.a.createElement(A,{className:"entry"},r.a.createElement(m,null,r.a.createElement(J,{flex:1,date:o}),r.a.createElement(P,t)),c.map((function(e){return r.a.createElement(L,{key:e._id}," ",e.name," ")})),r.a.createElement("div",{style:{paddingTop:15}},n))},B=function(e){var t=e.percent,n=e.stokeWidth,a=void 0===n?6:n,c=e.radius,o=void 0===c?52:c,l=e.color,i=void 0===l?"blue":l,s=o-2*a,u=2*s*Math.PI,d=u-t/100*u;return r.a.createElement("svg",{className:"progress-ring",height:2*o,width:2*o},r.a.createElement("circle",{x:"50%",y:"50%",stroke:i,fill:"transparent",strokeWidth:a,strokeDashoffset:d,strokeDasharray:"".concat(u," ").concat(u),r:s,cx:o,cy:o}),r.a.createElement("text",{style:{fontWeight:300},x:"50%",y:"50%",textAnchor:"middle",stroke:"#000",strokeWidth:"0.5",dx:"3px",dy:"5px"},t,"%"))},G=function(e){var t=e.entries,n=void 0===t?[]:t,a=e.moods,c=void 0===a?[]:a,o=n.reduce((function(e,t){return e+t.mood._id}),0),l=o&&n.length?o/n.length:0,i=l&&c.find((function(e){return e._id===(t=Math.round(l),n=1,a=c.length-1,Math.max(Math.min(t,a),n));var t,n,a})),u=(l/o*100).toFixed(1);return r.a.createElement(m,{flex:1},r.a.createElement(f,{flex:1,align:"center"},n.length>0&&i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{percent:u,color:i.color}),r.a.createElement(P,i)),r.a.createElement(s.a,{to:"/entry",style:{alignSelf:"flex-start"}},r.a.createElement(h,{color:"secondary",img:"/images/add.svg"},"Add New Entry"))))},H=function(){var e=Object(a.useContext)(k).moods,t=O({url:"".concat(u.api,"/entry"),method:"GET",defaultValue:[],onMount:!0}),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement(x,{loading:o},r.a.createElement(A,{main:!0},r.a.createElement(A,null,r.a.createElement(G,{moods:e,entries:c})),!c.length&&r.a.createElement("h3",null," Currently no entries ...  "),c.map((function(e){return r.a.createElement(z,Object.assign({key:e._id},e))}))))};n(26);var K=function(){var e=Object(a.useState)({user:"",token:localStorage.getItem("token")||"",setUser:p}),t=Object(i.a)(e,2),n=t[0],c=t[1],o=O({url:"".concat(u.api,"/config"),defaultValue:{moods:[],emotions:[]}}),m=Object(i.a)(o,3),f=m[0],E=m[1],v=m[2];function p(e){e.token&&localStorage.setItem("token",e.token),c(Object(l.a)({},n,{},e))}return b((function(){d("".concat(u.api,"/verify"),"POST").then((function(){v()})).catch((function(){}))})),r.a.createElement(S.Provider,{value:Object(l.a)({setUser:p},n)},r.a.createElement(k.Provider,{value:f},r.a.createElement("header",{className:"App-header"}),r.a.createElement("section",null,r.a.createElement(x,{loading:E},r.a.createElement(s.b,null,r.a.createElement(C,{path:"/signin"}),r.a.createElement(H,{path:"/"}),r.a.createElement(I,{user:n.user,path:"entry"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.37f3d01f.chunk.js.map